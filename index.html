<!DOCTYPE html>
<html>
<head>
  <link rel="stylesheet" href="assets/css/blockrain.css">
  <link type="text/css" rel="stylesheet" href="https://cdn.firebase.com/libs/firebaseui/4.2.0/firebaseui.css" />
  <script src="https://www.gstatic.com/firebasejs/7.2.0/firebase-app.js"></script>
  <script src="https://www.gstatic.com/firebasejs/7.2.0/firebase-analytics.js"></script>
  <script src="https://www.gstatic.com/firebasejs/7.2.0/firebase-auth.js"></script>
  <script src="https://www.gstatic.com/firebasejs/7.2.0/firebase-firestore.js"></script>
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
  <script src="assets/js/blockrain.jquery.min.js"></script>
  <script src="assets/js/firebase.config.min.js"></script>
  <script src="https://cdn.firebase.com/libs/firebaseui/4.2.0/firebaseui.js"></script>
  <script src="assets/js/firebaseui.config.min.js"></script>
</head>
<body>
  <div class="body">
    <div class="blockrain-highscore-holder">
      <span class='nickName'></span>
    </div>
    <div id="firebaseui-auth-container"></div>
    <center><div class="game"></div></center>
  </div>
<script>
  firebase.auth().onAuthStateChanged(function(user) {
  if (user) {
    document.getElementById("firebaseui-auth-container").style.display = "none";
    $('.game').blockrain({
    theme: 'custom'
    });
  }
});
</script>
<script type="text/javascript">
var db = firebase.firestore();
var highScores = db.collection('highScores').orderBy('score','desc').limit(5).get
.then(snapshot => {
    if (snapshot.empty) {
      console.log('No matching documents.');
      return;
    }
    var highScoretable = [];
    highScoretable += "<table border='1'>";
    snapshot.forEach(doc => { 
      highScoretable += "<tr><td>" + doc.get("nickName") +" "+ doc.get("score") + "</td></tr>";
    });
    highScoretable  += "</table>";
    document.querySelector('.blockrain-highscore-holder .nickName').innerHTML = highScoretable;
  })
  .catch(err => {
      console.log('Error getting documents', err);
    });
</script>
</body>
</html>